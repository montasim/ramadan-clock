generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model TimeEntry {
  id        String   @id @default(uuid())
  date      String // YYYY-MM-DD
  sehri     String // HH:mm
  iftar     String // HH:mm
  location  String?
  createdAt DateTime @default(now())

  @@unique([date, location])
  @@index([date])
  @@index([location])
}

model AdminUser {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String // hashed
  createdAt DateTime @default(now())
}

model UploadLog {
  id         String   @id @default(uuid())
  fileName   String
  rowCount   Int
  status     String // success, partial, failed
  errors     String? // JSON stringified
  uploadedAt DateTime @default(now())
}

model CronExecutionLog {
  id                  String   @id @default(uuid())
  executedAt          DateTime
  success             Boolean
  duration            Int      // Duration in milliseconds
  locationsProcessed  Int
  entriesProcessed    Int
  entriesCreated      Int
  entriesUpdated      Int
  entriesFailed       Int
  errors              String?  // JSON stringified

  @@index([executedAt])
}
